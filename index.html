<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title></title>
		
        <script src="jquery-3.3.1.min.js"></script>
		
		<style>
			
		</style>
		
		
    </head>
    <body>

     <canvas id="myCanvas" width="1000" height="600" style="border:1px solid #000000;">
	</canvas>

    </body>
	<script>
			var scanData;
			var c = document.getElementById("myCanvas");
			var ctx = c.getContext("2d");
			var items = [];
			var locations = [];
		
			$.ajax({
				method: "GET",
				url: "scans.json",
				dataType: "text"
			}).done(function (data) {
				scanData = JSON.parse(data);
				
				var maxX = -10000.0, minX = 10000.0, maxY = -10000.0, minY = 10000.0, maxZ = -10000.0, minZ = 10000.0;
				var minTime = 15393024303810, maxTime = 0;
				
				
				for (i = 0; i < scanData.length; i++) {
				
					//MinMax calculations
					if (scanData[i].location[0] > maxX) {
						maxX = scanData[i].location[0];
					}
					if (scanData[i].location[0] < minX) {
						minX = scanData[i].location[0];
					}
					
					if (scanData[i].location[1] > maxY) {
						maxY = scanData[i].location[1];
					}
					if (scanData[i].location[1] < minY) {
						minY = scanData[i].location[1];
					}
					
					if (scanData[i].location[2] > maxZ) {
						maxZ = scanData[i].location[2];
					}
					if (scanData[i].location[2] < minZ) {
						minZ = scanData[i].location[2];
					}
					
					if (scanData[i].timestamp > maxTime) {
						maxTime = scanData[i].timestamp;
					}
					if (scanData[i].timestamp < minTime) {
						minTime = scanData[i].timestamp;
					}
					
					//Location build
					var loc = {
						x:scanData[i].location[0],
						y:scanData[i].location[1],
						z:scanData[i].location[2]
					};
					
					if (locationFind(loc) == null) {
						locationAdd(loc);
					}	
					
					ctx.beginPath();
					ctx.arc(scanData[i].location[0] * 22 - 200, scanData[i].location[1] * 20 - (scanData[i].location[2] * 10), (-scanData[i].location[2] / 2) + 5, 0, 2 * Math.PI);
					ctx.stroke();
					
					if (items[scanData[i].id] != undefined) {
						
						ctx.moveTo(items[scanData[i].id].location[0] * 22 - 200, items[scanData[i].id].location[1] * 20 - (items[scanData[i].id].location[2] * 10));
						ctx.lineTo(scanData[i].location[0] * 22 - 200, scanData[i].location[1] * 20 - (scanData[i].location[2] * 10));
						//ctx.strokeStyle = "green";
						ctx.stroke();
						
						/*ctx.moveTo(items[scanData[i].id].location[0] * 22 - 200, items[scanData[i].id].location[1] * 20);
						ctx.lineTo(items[scanData[i].id].location[0] * 22 - 200, scanData[i].location[1] * 20);
						//ctx.strokeStyle = "red";
						ctx.stroke();
						
						ctx.moveTo(items[scanData[i].id].location[0] * 22 - 200, scanData[i].location[1] * 20);
						ctx.lineTo(scanData[i].location[0] * 22 - 200, scanData[i].location[1] * 20);
						//ctx.strokeStyle = "red";
						ctx.stroke();*/
						
					}
					
					items[scanData[i].id] = scanData[i];
				};
				
				locations.sort(function (a,b) {
					if (a.x != b.x) {
						return b.x - a.x;
					} else if (a.y != b.y) {
						return b.y - a.y;
					} else {
						return b.z - a.z;
					}
				});
				
				console.log("MaxX:" + maxX);
				console.log("MinX:" + minX);
				console.log("MaxY:" + maxY);
				console.log("MinY:" + minY);
				console.log("MaxZ:" + maxZ);
				console.log("MinZ:" + minZ);
				console.log("MaxTime:" + maxTime);
				console.log("MinTime:" + minTime);
				console.log("Timediff:" + (maxTime - minTime));
				
			});
			
			function drawType(x, y, z, type) {
				// The size of the emoji is set with the font
				ctx.font = '20px serif'
				ctx.textAlign = "center"; 
				ctx.textBaseline = "middle"; 
				
				var emojistring = "";
				
				switch (type) {
					case "air+freshener": emojistring = "ðŸŒ«ï¸"; break;
					case "apple": emojistring = "ðŸŽ"; break;
					case "bag": emojistring = "ðŸ‘œ"; break;
					case "balloon": emojistring = "ðŸŽˆ"; break;
					case "bananas": emojistring = "ðŸŒ"; break;
					case "beef": emojistring = "ðŸ¥©"; break;
					case "blanket": emojistring = "ðŸ‘˜"; break;
					case "blouse": emojistring = "ðŸ‘š"; break;
					case "book": emojistring = "ðŸ“—"; break;
					case "bookmark": emojistring = "ðŸ”–"; break;
					case "boom+box": emojistring = "ðŸ“»"; break;
					case "bottle": emojistring = "ðŸ¼"; break;
					case "bottle+cap": emojistring = "ðŸ¶"; break;
					case "bow": emojistring = "ðŸ¹"; break;
					case "bowl": emojistring = "ðŸ¥£"; break;
					case "box": emojistring = "ðŸ§ƒ"; break;
					case "bracelet": emojistring = "ðŸ¦¾"; break;
					case "bread": emojistring = "ðŸž"; break;
					case "brocolli": emojistring = "ðŸ¥’"; break;
					case "buckel": emojistring = "ðŸª"; break;
					case "button": emojistring = "ðŸ”˜"; break;
					case "camera": emojistring = "ðŸ“·"; break;
					case "candle": emojistring = "ðŸ•¯ï¸"; break;
					case "candy+wrapper": emojistring = "ðŸ¬"; break;
					case "canvas": emojistring = "ðŸ“‹"; break;
					case "carrots": emojistring = "ðŸ¥•"; break;
					case "cat": emojistring = "ðŸˆ"; break;
					case "CD": emojistring = "ðŸ’¿"; break;
					case "cell+phone": emojistring = "ðŸ“±"; break;
					case "chalk": emojistring = "âœï¸"; break;
					case "chapter+book": emojistring = "ðŸ•…"; break;
					case "charger": emojistring = "ðŸ”‹"; break;
					case "checkbook": emojistring = "ðŸ›‚"; break;
					case "chocolate": emojistring = "ðŸ«"; break;
					case "cinder+block": emojistring = "ðŸ”¥"; break;
					case "clamp": emojistring = "ðŸ—œï¸"; break;
					case "clay+pot": emojistring = "ðŸ§±"; break;
					case "clock": emojistring = "â°"; break;
					case "clothes": emojistring = "ðŸ‘–"; break;
					case "coasters": emojistring = "ðŸŽ¢"; break;
					case "computer": emojistring = "ðŸ’»"; break;
					case "conditioner": emojistring = "ðŸŒ±"; break;
					case "controller": emojistring = "ðŸŽ®"; break;
					case "cookie+jar": emojistring = "ðŸ¥ "; break;
					case "cork": emojistring = "ðŸ¾"; break;
					case "credit+card": emojistring = "ðŸ’³"; break;
					case "cup": emojistring = "ðŸ¥¤"; break;
					case "deodorant": emojistring = "ðŸš"; break;
					case "doll": emojistring = "ðŸŽŽ"; break;
					case "drill+press": emojistring = "ðŸš´"; break;
					case "eraser": emojistring = "âœ"; break;
					case "eye+liner": emojistring = "ðŸ‘€"; break;
					case "face+wash": emojistring = "ðŸ¥µ"; break;
					case "fake+flowers": emojistring = "ðŸŒ¹"; break;
					case "flag": emojistring = "ðŸ³ï¸"; break;
					case "floor": emojistring = "ðŸ§Ž"; break;
					case "flowers": emojistring = "ðŸ’"; break;
					case "food": emojistring = "ðŸ¥«"; break;
					case "fork": emojistring = "ðŸ´"; break;
					case "fridge": emojistring = "â„ï¸"; break;
					case "glass": emojistring = "ðŸ¸"; break;
					case "glasses": emojistring = "ðŸ‘“"; break;
					case "glow+stick": emojistring = "ðŸŒŸ"; break;
					case "greeting+card": emojistring = "ðŸ¤"; break;
					case "grid+paper": emojistring = "ðŸ"; break;
					case "hair+brush": emojistring = "ðŸ‘±â€"; break;
					case "hair+tie": emojistring = "ðŸ‘”"; break;
					case "hanger": emojistring = "ðŸ“”"; break;
					case "headphones": emojistring = "ðŸŽ§"; break;
					case "helmet": emojistring = "â›‘ï¸"; break;
					case "ice+cube+tray": emojistring = "ðŸ§Š"; break;
					case "ipod": emojistring = "ðŸ’Š"; break;
					case "keyboard": emojistring = "âŒ¨ï¸"; break;
					case "key+chain": emojistring = "ðŸ”"; break;
					case "keys": emojistring = "ðŸ”‘"; break;
					case "knife": emojistring = "ðŸ”ª"; break;
					case "lace": emojistring = "ðŸ–²ï¸"; break;
					case "lamp": emojistring = "ðŸ’¡"; break;
					case "lamp+shade": emojistring = "ðŸª”"; break;
					case "leg+warmers": emojistring = "ðŸ¦µ"; break;
					case "lip+gloss": emojistring = "ðŸ’„"; break;
					case "lotion": emojistring = "ðŸ§´"; break;
					case "magnet": emojistring = "ðŸ§²"; break;
					case "milk": emojistring = "ðŸ¥›"; break;
					case "mirror": emojistring = "ðŸš"; break;
					case "money": emojistring = "ðŸ’¸"; break;
					case "monitor": emojistring = "ðŸ–¥ï¸"; break;
					case "mop": emojistring = "ðŸ§½"; break;
					case "mouse+pad": emojistring = "ðŸ–±ï¸"; break;
					case "mp3+player": emojistring = "ðŸ’½"; break;
					case "nail+clippers": emojistring = "ðŸ’…"; break;
					case "nail+file": emojistring = "ðŸ“"; break;
					case "needle": emojistring = "ðŸ’‰"; break;
					case "newspaper": emojistring = "ðŸ“°"; break;
					case "outlet": emojistring = "â™€ï¸"; break;
					case "packing+peanuts": emojistring = "ðŸ¥œ"; break;
					case "paint+brush": emojistring = "ðŸ–Œï¸"; break;
					case "pants": emojistring = "ðŸ§"; break;
					case "paper": emojistring = "ðŸ§»"; break;
					case "pen": emojistring = "ðŸ–‹ï¸"; break;
					case "pencil": emojistring = "âœï¸"; break;
					case "perfume": emojistring = "ðŸš¬"; break;
					case "phone": emojistring = "â˜Žï¸"; break;
					case "photo+album": emojistring = "ðŸ¤³"; break;
					case "picture+frame": emojistring = "ðŸ–¼ï¸"; break;
					case "pillow": emojistring = "ðŸ›ï¸"; break;
					case "plastic+fork": emojistring = "ðŸŽ"; break;
					case "plate": emojistring = "ðŸ½ï¸"; break;
					case "playing+card": emojistring = "ðŸƒ"; break;
					case "pool+stick": emojistring = "ðŸŽ±"; break;
					case "puddle": emojistring = "ðŸŠ"; break;
					case "purse": emojistring = "ðŸ‘›"; break;
					case "radio": emojistring = "ðŸŽ™ï¸"; break;
					case "remote": emojistring = "ðŸ“"; break;
					case "ring": emojistring = "ðŸ’"; break;
					case "rubber+band": emojistring = "ðŸ’¶"; break;
					case "rubber+duck": emojistring = "ðŸ¦†"; break;
					case "rug": emojistring = "ðŸ¤«"; break;
					case "rusty+nail": emojistring = "ðŸ”¨"; break;
					case "sailboat": emojistring = "â›µ"; break;
					case "sandal": emojistring = "ðŸ‘¡"; break;
					case "sand+paper": emojistring = "â³"; break;
					case "scotch+tape": emojistring = "ðŸ¥ƒ"; break;
					case "screw": emojistring = "ðŸ”©"; break;
					case "seat+belt": emojistring = "ðŸ¥‹"; break;
					case "shampoo": emojistring = "ðŸ§´"; break;
					case "sharpie": emojistring = "ðŸ¥§"; break;
					case "shawl": emojistring = "â˜‚ï¸"; break;
					case "shirt": emojistring = "ðŸŽ½"; break;
					case "shoe+lace": emojistring = "ðŸ‘ž"; break;
					case "shoes": emojistring = "ðŸ‘Ÿ"; break;
					case "shovel": emojistring = "ðŸ¥„"; break;
					case "sidewalk": emojistring = "ðŸš“"; break;
					case "sketch+pad": emojistring = "ðŸ“”"; break;
					case "slipper": emojistring = "ðŸ¥¿"; break;
					case "soap": emojistring = "ðŸ§¼"; break;
					case "socks": emojistring = "ðŸ§¦"; break;
					case "soda+can": emojistring = "ðŸ¥¤"; break;
					case "sofa": emojistring = "ðŸ›‹ï¸"; break;
					case "soy+sauce+packet": emojistring = "ðŸ¢"; break;
					case "speakers": emojistring = "ðŸ”ˆ"; break;
					case "sponge": emojistring = "ðŸ§½"; break;
					case "spoon": emojistring = "ðŸ¥¢"; break;
					case "spring": emojistring = "â™¨ï¸"; break;
					case "sticky+note": emojistring = "ðŸ’´"; break;
					case "stockings": emojistring = "ðŸ“ˆ"; break;
					case "stop+sign": emojistring = "ðŸ›‘"; break;
					case "street+lights": emojistring = "ðŸš¦"; break;
					case "sun+glasses": emojistring = "ðŸ•¶ï¸"; break;
					case "table": emojistring = "ðŸ“‹"; break;
					case "teddies": emojistring = "ðŸ§¸"; break;
					case "thermometer": emojistring = "ðŸŒ¡ï¸"; break;
					case "thermostat": emojistring = "ðŸ¤’"; break;
					case "thread": emojistring = "ðŸ§µ"; break;
					case "tire+swing": emojistring = "ðŸ˜«"; break;
					case "tissue+box": emojistring = "ðŸ¤§"; break;
					case "toe+ring": emojistring = "ðŸ‘£"; break;
					case "toilet": emojistring = "ðŸš½"; break;
					case "tomato": emojistring = "ðŸ…"; break;
					case "toothbrush": emojistring = "ðŸ¦·"; break;
					case "toothpaste": emojistring = "ðŸ¤ª"; break;
					case "tooth+picks": emojistring = "ðŸ—ï¸"; break;
					case "towel": emojistring = "ðŸ§»"; break;
					case "tree": emojistring = "ðŸŒ³"; break;
					case "truck": emojistring = "ðŸšš"; break;
					case "tv": emojistring = "ðŸ“º"; break;
					case "twezzers": emojistring = "ðŸ’¢"; break;
					case "twister": emojistring = "ðŸŒ€"; break;
					case "USB+drive": emojistring = "â›“ï¸"; break;
					case "vase": emojistring = "âš±ï¸"; break;
					case "video+games": emojistring = "ðŸŽ®"; break;
					case "wagon": emojistring = "ðŸšƒ"; break;
					case "wallet": emojistring = "ðŸ‘›"; break;
					case "watch": emojistring = "âŒš"; break;
					case "water+bottle": emojistring = "ðŸŒŠ"; break;
					case "white+out": emojistring = "â¬œ"; break;
					case "zipper": emojistring = "ðŸ¤"; break;		        			default: emojistring = "ðŸž"; break;
				}
				
				ctx.fillText(emojistring, x, y);
			}
			
			function locationFind(loc) {
				var locationCount = 0;
				while (locationCount < locations.length && !(locations[locationCount].x == loc.x &&
															 locations[locationCount].y == loc.y &&
															 locations[locationCount].z == loc.z)) {
					locationCount++;
				}
				
				if (locationCount < locations.length) {
					return locations[locationCount];
				} else {
					return null;
				}
			}
			
			function locationAdd(loc) {
				locations.push({
					id: locations.length,
					x:loc.x,
					y:loc.y,
					z:loc.z
				});
			}
			
			//function textList()
			
		</script>
	
</html>

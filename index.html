<!doctype html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>[WRS] Warehouse Replay System</title>

	<script src="jquery-3.3.1.min.js"></script>

	<style>
		@font-face {
			font-family: 'emojii';
			src: url('TwitterColorEmoji-SVGinOT.ttf');
		}


		* {
			font-family: emojii;
		}

		body {
			background-image: url('bosch-logo-2.png');
			background-repeat: no-repeat;
			background-attachment: fixed;
			background-position: center;
			background-size: contain;
		}

		#container {
			position: absolute;
			margin: 0 auto;

			top: 50%;
			left: 50%;
			-ms-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
		}

		body {
			padding: 0;
			margin: 0;
			width: 100%;
			height: 100%;
		}
		#ownLogo {
			position: absolute;
			right: 0px;
			bottom: 0px;
			font-size: 50px;
		}
		
		.slider {
			width: 100%;
		}
	</style>


</head>

<body>
	
	<div id="container">
		<h1 style="text-align: center">[WRS] Warehouse Replay System</h1>
		<div>
			<code id="currentTime"></code>
		</div>
		<div>
			<label for="filterIdInput">Id:</label>
			<input id="filterIdInput" onkeyup="filterById()" list="idList">
			<label for="filterTypeInput">Type:</label>
			<input id="filterTypeInput" onkeyup="filterByType()" list="typeList">
			<label for="filterNameInput">Name:</label>
			<input id="filterNameInput" onkeyup="filterByName()" list="nameList">
		</div>
		<canvas id="myCanvas" width="1000" height="600" style="border:1px solid #000000;"></canvas>
		<input type="range" class="slider" id="slider" onmousedown="sliderChangeEvent()" onmouseup="sliderChangeEndEvent()" onchange="sliderChangeMoveEvent()">
		<button id="pauseButton" onclick="pause()" disabled>Pause</button>
		<button id="playButton" onclick="play()">Play</button>
		<input id="gotoInput" type="text">
		<button id="gotoButton" onclick="goToTime()">Go</button>
		<br><span>Height scale:</span><input type="range" style="width: 50%" id="heightSlider" oninput="heightSliderChange()">
	</div>
	
	<datalist id="idList"></datalist>
	<datalist id="nameList"></datalist>
	<datalist id="typeList"></datalist>

	<div id="ownLogo"><font color="brown">ğŸ</font><font color="black">â•ï¸</font><font color="red">ğŸ…</font></div>

</body>
<script>
	var scanData;
	var c = document.getElementById("myCanvas");
	var ctx = c.getContext("2d");
	var items = [];
	var currentTime;
	var tickRate = 1000/30;
	var timeBetweenTicks = tickRate * 10;
	var timer;
	var filterId;
	var filterName;
	var filterType;
	var zScale = 10;
	var idList = [], nameList = [], typeList = [];
	
	var checkpoints = [];
	var maxX = -10000.0, minX = 10000.0, maxY = -10000.0, minY = 10000.0, maxZ = -10000.0, minZ = 10000.0;
	var minTime = 15393024303810, maxTime = 0;

	$.ajax({
		method: "GET",
		url: "scans.json",
		dataType: "text"
	}).done(function (data) {
		scanData = JSON.parse(data);

		var maxX = -10000.0, minX = 10000.0, maxY = -10000.0, minY = 10000.0, maxZ = -10000.0, minZ = 10000.0;
		minTime = 15393024303810, maxTime = 0;


		for (i = 0; i < scanData.length; i++) {

			//MinMax calculations
			if (scanData[i].location[0] > maxX) {
				maxX = scanData[i].location[0];
			}
			if (scanData[i].location[0] < minX) {
				minX = scanData[i].location[0];
			}

			if (scanData[i].location[1] > maxY) {
				maxY = scanData[i].location[1];
			}
			if (scanData[i].location[1] < minY) {
				minY = scanData[i].location[1];
			}

			if (scanData[i].location[2] > maxZ) {
				maxZ = scanData[i].location[2];
			}
			if (scanData[i].location[2] < minZ) {
				minZ = scanData[i].location[2];
			}

			if (scanData[i].timestamp > maxTime) {
				maxTime = scanData[i].timestamp;
			}
			if (scanData[i].timestamp < minTime) {
				minTime = scanData[i].timestamp;
			}
			
			if (!idList.includes(scanData[i].id)) {
				idList.push(scanData[i].id);
			}
			if (!nameList.includes(scanData[i].name)) {
				nameList.push(scanData[i].name);
			}
			if (!typeList.includes(scanData[i].type)) {
				typeList.push(scanData[i].type);
			}

			//Location build
			var loc = {
				x: scanData[i].location[0],
				y: scanData[i].location[1],
				z: scanData[i].location[2]
			};

			var currentCheckpoint = checkpointFind(checkpoints, loc);
			if (currentCheckpoint == null) {
				currentCheckpoint = checkpointAdd(checkpoints, loc);
			}

			if (items[scanData[i].id] == undefined) {
				items[scanData[i].id] = {
					id: scanData[i].id,
					name: scanData[i].name,
					type: scanData[i].type,
					locations: [{timestamp: scanData[i].timestamp, checkpoint: currentCheckpoint}]
				};
			} else {
				var lastLocation = items[scanData[i].id].locations[items[scanData[i].id].locations.length - 1];
				items[scanData[i].id].locations.push({timestamp: scanData[i].timestamp, checkpoint: currentCheckpoint});
				var newLocation = items[scanData[i].id].locations[items[scanData[i].id].locations.length - 1];
				
				if (lastLocation != undefined) {
					if (!lastLocation.checkpoint.nextCPs.includes(newLocation.checkpoint)) {
						lastLocation.checkpoint.nextCPs.push(newLocation.checkpoint);
					}
					
					if (!newLocation.checkpoint.previousCPs.includes(lastLocation.checkpoint)) {
						newLocation.checkpoint.previousCPs.push(lastLocation.checkpoint);
					}
				}
			}

		};
		
		var listHTML = "";
		for (i = 0; i < idList.length; i++) {
			listHTML += "<option value=\"" + idList[i] + "\">";
		}
		$("#idList").html(listHTML);
		listHTML = "";
		for (i = 0; i < nameList.length; i++) {
			listHTML += "<option value=\"" + nameList[i] + "\">";
		}
		$("#nameList").html(listHTML);
		listHTML = "";
		for (i = 0; i < typeList.length; i++) {
			listHTML += "<option value=\"" + typeList[i] + "\">";
		}
		$("#typeList").html(listHTML);

		checkpoints.sort(function (a, b) {
			if (a.x != b.x) {
				return b.x - a.x;
			} else if (a.y != b.y) {
				return b.y - a.y;
			} else {
				return b.z - a.z;
			}
		});

		console.log("MaxX:" + maxX);
		console.log("MinX:" + minX);
		console.log("MaxY:" + maxY);
		console.log("MinY:" + minY);
		console.log("MaxZ:" + maxZ);
		console.log("MinZ:" + minZ);
		console.log("MaxTime:" + maxTime);
		console.log("MinTime:" + minTime);
		console.log("Timediff:" + (maxTime - minTime));

		
		$("#slider").attr("min",minTime).attr("max",maxTime);
		$("#heightSlider").attr("min",0).attr("max",20).val(10);
		currentTime = minTime;
		clearCanvas();
		drawCanvas();
	});
	
	
	function getEmoji(type) {
		var emojistring = "";

		switch (type) {
			case "air+freshener": emojistring = "ğŸŒ«ï¸"; break;
			case "apple": emojistring = "ğŸ"; break;
			case "bag": emojistring = "ğŸ‘œ"; break;
			case "balloon": emojistring = "ğŸˆ"; break;
			case "bananas": emojistring = "ğŸŒ"; break;
			case "beef": emojistring = "ğŸ¥©"; break;
			case "blanket": emojistring = "ğŸ‘˜"; break;
			case "blouse": emojistring = "ğŸ‘š"; break;
			case "book": emojistring = "ğŸ“—"; break;
			case "bookmark": emojistring = "ğŸ”–"; break;
			case "boom+box": emojistring = "ğŸ“»"; break;
			case "bottle": emojistring = "ğŸ¼"; break;
			case "bottle+cap": emojistring = "ğŸ¶"; break;
			case "bow": emojistring = "ğŸ¹"; break;
			case "bowl": emojistring = "ğŸ¥£"; break;
			case "box": emojistring = "ğŸ§ƒ"; break;
			case "bracelet": emojistring = "ğŸ¦¾"; break;
			case "bread": emojistring = "ğŸ"; break;
			case "brocolli": emojistring = "ğŸ¥’"; break;
			case "buckel": emojistring = "ğŸª"; break;
			case "button": emojistring = "ğŸ”˜"; break;
			case "camera": emojistring = "ğŸ“·"; break;
			case "candle": emojistring = "ğŸ•¯ï¸"; break;
			case "candy+wrapper": emojistring = "ğŸ¬"; break;
			case "canvas": emojistring = "ğŸ“‹"; break;
			case "carrots": emojistring = "ğŸ¥•"; break;
			case "cat": emojistring = "ğŸˆ"; break;
			case "CD": emojistring = "ğŸ’¿"; break;
			case "cell+phone": emojistring = "ğŸ“±"; break;
			case "chalk": emojistring = "âœï¸"; break;
			case "chapter+book": emojistring = "ğŸ•…"; break;
			case "charger": emojistring = "ğŸ”‹"; break;
			case "checkbook": emojistring = "ğŸ›‚"; break;
			case "chocolate": emojistring = "ğŸ«"; break;
			case "cinder+block": emojistring = "ğŸ”¥"; break;
			case "clamp": emojistring = "ğŸ—œï¸"; break;
			case "clay+pot": emojistring = "ğŸ§±"; break;
			case "clock": emojistring = "â°"; break;
			case "clothes": emojistring = "ğŸ‘–"; break;
			case "coasters": emojistring = "ğŸ¢"; break;
			case "computer": emojistring = "ğŸ’»"; break;
			case "conditioner": emojistring = "ğŸŒ±"; break;
			case "controller": emojistring = "ğŸ®"; break;
			case "cookie+jar": emojistring = "ğŸ¥ "; break;
			case "cork": emojistring = "ğŸ¾"; break;
			case "credit+card": emojistring = "ğŸ’³"; break;
			case "cup": emojistring = "ğŸ¥¤"; break;
			case "deodorant": emojistring = "ğŸš"; break;
			case "doll": emojistring = "ğŸ"; break;
			case "drill+press": emojistring = "ğŸš´"; break;
			case "eraser": emojistring = "âœ"; break;
			case "eye+liner": emojistring = "ğŸ‘€"; break;
			case "face+wash": emojistring = "ğŸ¥µ"; break;
			case "fake+flowers": emojistring = "ğŸŒ¹"; break;
			case "flag": emojistring = "ğŸ³ï¸"; break;
			case "floor": emojistring = "ğŸ§"; break;
			case "flowers": emojistring = "ğŸ’"; break;
			case "food": emojistring = "ğŸ¥«"; break;
			case "fork": emojistring = "ğŸ´"; break;
			case "fridge": emojistring = "â„ï¸"; break;
			case "glass": emojistring = "ğŸ¸"; break;
			case "glasses": emojistring = "ğŸ‘“"; break;
			case "glow+stick": emojistring = "ğŸŒŸ"; break;
			case "greeting+card": emojistring = "ğŸ¤"; break;
			case "grid+paper": emojistring = "ğŸ"; break;
			case "hair+brush": emojistring = "ğŸ‘±â€"; break;
			case "hair+tie": emojistring = "ğŸ‘”"; break;
			case "hanger": emojistring = "ğŸ“”"; break;
			case "headphones": emojistring = "ğŸ§"; break;
			case "helmet": emojistring = "â›‘ï¸"; break;
			case "ice+cube+tray": emojistring = "ğŸ§Š"; break;
			case "ipod": emojistring = "ğŸ’Š"; break;
			case "keyboard": emojistring = "âŒ¨ï¸"; break;
			case "key+chain": emojistring = "ğŸ”"; break;
			case "keys": emojistring = "ğŸ”‘"; break;
			case "knife": emojistring = "ğŸ”ª"; break;
			case "lace": emojistring = "ğŸ–²ï¸"; break;
			case "lamp": emojistring = "ğŸ’¡"; break;
			case "lamp+shade": emojistring = "ğŸª”"; break;
			case "leg+warmers": emojistring = "ğŸ¦µ"; break;
			case "lip+gloss": emojistring = "ğŸ’„"; break;
			case "lotion": emojistring = "ğŸ§´"; break;
			case "magnet": emojistring = "ğŸ§²"; break;
			case "milk": emojistring = "ğŸ¥›"; break;
			case "mirror": emojistring = "ğŸš"; break;
			case "money": emojistring = "ğŸ’¸"; break;
			case "monitor": emojistring = "ğŸ–¥ï¸"; break;
			case "mop": emojistring = "ğŸ§½"; break;
			case "mouse+pad": emojistring = "ğŸ–±ï¸"; break;
			case "mp3+player": emojistring = "ğŸ’½"; break;
			case "nail+clippers": emojistring = "ğŸ’…"; break;
			case "nail+file": emojistring = "ğŸ“"; break;
			case "needle": emojistring = "ğŸ’‰"; break;
			case "newspaper": emojistring = "ğŸ“°"; break;
			case "outlet": emojistring = "â™€ï¸"; break;
			case "packing+peanuts": emojistring = "ğŸ¥œ"; break;
			case "paint+brush": emojistring = "ğŸ–Œï¸"; break;
			case "pants": emojistring = "ğŸ§"; break;
			case "paper": emojistring = "ğŸ§»"; break;
			case "pen": emojistring = "ğŸ–‹ï¸"; break;
			case "pencil": emojistring = "âœï¸"; break;
			case "perfume": emojistring = "ğŸš¬"; break;
			case "phone": emojistring = "â˜ï¸"; break;
			case "photo+album": emojistring = "ğŸ¤³"; break;
			case "picture+frame": emojistring = "ğŸ–¼ï¸"; break;
			case "pillow": emojistring = "ğŸ›ï¸"; break;
			case "plastic+fork": emojistring = "ğŸ"; break;
			case "plate": emojistring = "ğŸ½ï¸"; break;
			case "playing+card": emojistring = "ğŸƒ"; break;
			case "pool+stick": emojistring = "ğŸ±"; break;
			case "puddle": emojistring = "ğŸŠ"; break;
			case "purse": emojistring = "ğŸ‘›"; break;
			case "radio": emojistring = "ğŸ™ï¸"; break;
			case "remote": emojistring = "ğŸ“"; break;
			case "ring": emojistring = "ğŸ’"; break;
			case "rubber+band": emojistring = "ğŸ’¶"; break;
			case "rubber+duck": emojistring = "ğŸ¦†"; break;
			case "rug": emojistring = "ğŸ¤«"; break;
			case "rusty+nail": emojistring = "ğŸ”¨"; break;
			case "sailboat": emojistring = "â›µ"; break;
			case "sandal": emojistring = "ğŸ‘¡"; break;
			case "sand+paper": emojistring = "â³"; break;
			case "scotch+tape": emojistring = "ğŸ¥ƒ"; break;
			case "screw": emojistring = "ğŸ”©"; break;
			case "seat+belt": emojistring = "ğŸ¥‹"; break;
			case "shampoo": emojistring = "ğŸ§´"; break;
			case "sharpie": emojistring = "ğŸ¥§"; break;
			case "shawl": emojistring = "â˜‚ï¸"; break;
			case "shirt": emojistring = "ğŸ½"; break;
			case "shoe+lace": emojistring = "ğŸ‘"; break;
			case "shoes": emojistring = "ğŸ‘Ÿ"; break;
			case "shovel": emojistring = "ğŸ¥„"; break;
			case "sidewalk": emojistring = "ğŸš“"; break;
			case "sketch+pad": emojistring = "ğŸ“”"; break;
			case "slipper": emojistring = "ğŸ¥¿"; break;
			case "soap": emojistring = "ğŸ§¼"; break;
			case "socks": emojistring = "ğŸ§¦"; break;
			case "soda+can": emojistring = "ğŸ¥¤"; break;
			case "sofa": emojistring = "ğŸ›‹ï¸"; break;
			case "soy+sauce+packet": emojistring = "ğŸ¢"; break;
			case "speakers": emojistring = "ğŸ”ˆ"; break;
			case "sponge": emojistring = "ğŸ§½"; break;
			case "spoon": emojistring = "ğŸ¥¢"; break;
			case "spring": emojistring = "â™¨ï¸"; break;
			case "sticky+note": emojistring = "ğŸ’´"; break;
			case "stockings": emojistring = "ğŸ“ˆ"; break;
			case "stop+sign": emojistring = "ğŸ›‘"; break;
			case "street+lights": emojistring = "ğŸš¦"; break;
			case "sun+glasses": emojistring = "ğŸ•¶ï¸"; break;
			case "table": emojistring = "ğŸ“‹"; break;
			case "teddies": emojistring = "ğŸ§¸"; break;
			case "thermometer": emojistring = "ğŸŒ¡ï¸"; break;
			case "thermostat": emojistring = "ğŸ¤’"; break;
			case "thread": emojistring = "ğŸ§µ"; break;
			case "tire+swing": emojistring = "ğŸ˜«"; break;
			case "tissue+box": emojistring = "ğŸ¤§"; break;
			case "toe+ring": emojistring = "ğŸ‘£"; break;
			case "toilet": emojistring = "ğŸš½"; break;
			case "tomato": emojistring = "ğŸ…"; break;
			case "toothbrush": emojistring = "ğŸ¦·"; break;
			case "toothpaste": emojistring = "ğŸ¤ª"; break;
			case "tooth+picks": emojistring = "ğŸ—ï¸"; break;
			case "towel": emojistring = "ğŸ§»"; break;
			case "tree": emojistring = "ğŸŒ³"; break;
			case "truck": emojistring = "ğŸšš"; break;
			case "tv": emojistring = "ğŸ“º"; break;
			case "twezzers": emojistring = "ğŸ’¢"; break;
			case "twister": emojistring = "ğŸŒ€"; break;
			case "USB+drive": emojistring = "â›“ï¸"; break;
			case "vase": emojistring = "âš±ï¸"; break;
			case "video+games": emojistring = "ğŸ®"; break;
			case "wagon": emojistring = "ğŸšƒ"; break;
			case "wallet": emojistring = "ğŸ‘›"; break;
			case "watch": emojistring = "âŒš"; break;
			case "water+bottle": emojistring = "ğŸŒŠ"; break;
			case "white+out": emojistring = "â¬œ"; break;
			case "zipper": emojistring = "ğŸ¤"; break; default: emojistring = "ğŸ"; break;
		}

		return emojistring;
	}

	function drawType(x, y, z, type) {
		// The size of the emoji is set with the font
		ctx.font = (z+10) + 'px emojii'
		ctx.textAlign = "center";
		ctx.textBaseline = "middle";

		ctx.fillText(getEmoji(type), x, y);
	}

	function checkpointFind(container, loc) {
		var checkpointCount = 0;
		while (checkpointCount < container.length && !(container[checkpointCount].x == loc.x &&
													 container[checkpointCount].y == loc.y &&
													 container[checkpointCount].z == loc.z)) {
			checkpointCount++;
		}
		
		if (checkpointCount < container.length) {
			return container[checkpointCount];
		} else {
			return null;
		}
	}

	function checkpointAdd(container, loc) {
		container.push({
			id: container.length,
			x:loc.x,
			y:loc.y,
			z:loc.z,
			isStart: false,
			isEnd: false,
			nextCPs: [],
			previousCPs: [],
		});
		
		return container[container.length - 1];
	}
	
	function circleRadius(cp) {
		return (-cp.z / 2) + 5
	}

	function circlePos(cp) {
		return {
			x: cp.x * 22 - 200,
			y: cp.y * 20 - (cp.z * zScale),
			r: circleRadius(cp)
		}
	}

	
	function circlePosBetween(from, to, percent) {
		percent = Math.min(Math.max(percent, 0), 100);
		
		let fromCP = circlePos(from);
		let toCP = circlePos(to);
		return {
			x: fromCP.x + (toCP.x - fromCP.x) * percent / 100,
			y: fromCP.y + (toCP.y - fromCP.y) * percent / 100,
			r: fromCP.r + (toCP.r - fromCP.r) * percent / 100
		}
	}

	function drawCheckpoints() {
				for (i = 0; i < checkpoints.length; i++) {
					for (j = 0; j < checkpoints[i].nextCPs.length; j++) {
						let fromCP = circlePos(checkpoints[i]);
						let toCP = circlePos(checkpoints[i].nextCPs[j]);
						let dirX = toCP.x - fromCP.x;
						let dirY = toCP.y - fromCP.y;
						let norm = Math.sqrt(dirX * dirX + dirY * dirY);
						dirX /= norm;
						dirY /= norm;

						ctx.beginPath();
						ctx.moveTo(fromCP.x + dirY * fromCP.r, fromCP.y - dirX * fromCP.r);
						ctx.lineTo(toCP.x + dirY * toCP.r, toCP.y - dirX * toCP.r);
						ctx.strokeStyle = "black";
						ctx.stroke();
						
						ctx.beginPath();
						ctx.moveTo(fromCP.x - dirY * fromCP.r, fromCP.y + dirX * fromCP.r);
						ctx.lineTo(toCP.x - dirY * toCP.r, toCP.y + dirX * toCP.r);
						ctx.strokeStyle = "black";
						ctx.stroke();
					}
				}
			
				for (i = 0; i < checkpoints.length; i++) {
					ctx.beginPath();
					let cp = circlePos(checkpoints[i]);

					ctx.arc(cp.x, cp.y, cp.r, 0, 2 * Math.PI);
					ctx.strokeStyle = "green";
					ctx.stroke();
				}
 			}

	function pause(){
		$("#pauseButton").attr("disabled",true);
		$("#playButton").attr("disabled",false);

		clearInterval(timer);
		timer = undefined;
	}

	function play(){
		$("#pauseButton").attr("disabled",false);
		$("#playButton").attr("disabled",true);

		timer = setInterval(function(){
			if(currentTime < maxTime){
				currentTime += timeBetweenTicks;
				if(currentTime >= maxTime){
					currentTime = maxTime;
				}
				clearCanvas();
				drawCanvas();
				document.getElementById('slider').value = currentTime +"";
			} else {
				pause();
			}
			console.info(currentTime)
		}, tickRate)
	}

	function clearCanvas(){
		ctx.setTransform(1, 0, 0, 1, 0, 0);
		ctx.clearRect(0, 0, c.width, c.height);
		document.getElementById("currentTime").innerText = Math.round(currentTime);
	}

	function drawCanvas(){
		drawCheckpoints();
		console.log("hehe");
		
		for (var key in items) {
			var previousCP, nextCP;
			
			var j = 0;
			
			while (j < items[key].locations.length - 1 && !(items[key].locations[j].timestamp <= currentTime && items[key].locations[j + 1].timestamp > currentTime)) {
				j++;
	}
			
			if (j < items[key].locations.length - 1) {
				
				previousCP = items[key].locations[j].checkpoint;
				nextCP = items[key].locations[j + 1].checkpoint;
				
				var timeScale = (currentTime - items[key].locations[j].timestamp) / (items[key].locations[j + 1].timestamp - items[key].locations[j].timestamp);
				var x = (nextCP.x - previousCP.x) * timeScale + previousCP.x;
				var y = (nextCP.y - previousCP.y) * timeScale + previousCP.y;
				
				console.log(x + " " + y);
				
				
				var hehe = circlePosBetween(previousCP, nextCP, timeScale * 100);
				if((filterType == undefined || items[key].type.indexOf(filterType) != -1 )&&
				 (filterId == undefined || items[key].id.indexOf(filterId) != -1 )&&
				 (filterName == undefined || items[key].name.indexOf(filterName) != -1)){
					drawType(hehe.x, hehe.y, hehe.r, items[key].type);
				}
			}
		}
	}

	function filterById(){
		var filterInput = document.getElementById("filterIdInput").value;
		if(filterInput != "" && filterInput != undefined){
			filterId = filterInput;
		} else {
			filterId = undefined;
		}
		clearCanvas();
		drawCanvas();
	}

	function filterByName(){
		var filterInput = document.getElementById("filterNameInput").value;
		if(filterInput != "" && filterInput != undefined){
			filterName = filterInput;
		} else {
			filterName = undefined;
		}
		clearCanvas();
		drawCanvas();
	}

	function filterByType(){
		var filterInput = document.getElementById("filterTypeInput").value;
		if(filterInput != "" && filterInput != undefined){
			filterType = filterInput;
		} else {
			filterType = undefined;
		}
		clearCanvas();
		drawCanvas();
	}

	function goToTime(){
		var time = document.getElementById("gotoInput").value;
		if(time != undefined && time != "" && (parseInt(time) >= minTime || parseInt(time) <= maxTime)){
			document.getElementById('slider').value = time;
			sliderChangeMoveEvent();
			pause();
		}
	}

	var wasTimer;
	function sliderChangeEvent() {
		wasTimer = timer;
		if (wasTimer)
			pause();
	}

	function sliderChangeMoveEvent() {
		let value = document.getElementById('slider').value;
		currentTime = parseInt(value);
		
		clearCanvas();
		drawCanvas();
	}

	function sliderChangeEndEvent() {
		if (wasTimer)
			play();
	}
	
	function heightSliderChange() {
		zScale = parseInt(document.getElementById('heightSlider').value);
		clearCanvas();
		drawCanvas();
	}
			//function textList()

</script>

</html>
